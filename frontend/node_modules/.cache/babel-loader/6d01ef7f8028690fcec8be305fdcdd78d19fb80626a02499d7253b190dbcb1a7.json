{"ast":null,"code":"import _slicedToArray from\"/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter,NavLink,Route,Switch}from\"react-router-dom\";import Register from\"./Register\";import Login from\"./Login\";import FileUpload from\"./FileUpload\";import FileDownload from\"./FileDownload\";import PublicRoute from\"./routes/PublicRoute\";import PrivateRoute from\"./routes/PrivateRoutes\";import React,{useEffect,useState}from\"react\";import{getUser,getToken,setUserSession,resetUserSession}from\"./service/AuthService\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var verifyTokenAPIUrl='https://891mazmbm6.execute-api.us-east-1.amazonaws.com/prod/verify';function App(){document.title=\"FileSurfer\";var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isAuthenticating=_useState2[0],setAuthenticating=_useState2[1];useEffect(function(){var token=getToken();if(token==='undefined'||token===undefined||token===null||!token){return;}var requestConfig={headers:{'x-api-key':'AWSOFGYQpg2EwcG41eiyXalnnBTPdhCJ6Q5SLdzy'}};var requestBody={user:getUser(),token:token};axios.post(verifyTokenAPIUrl,requestBody,requestConfig).then(function(response){setUserSession(response.data.user,response.data.token);setAuthenticating(false);//se il token è stato validato\n}).catch(function(){resetUserSession();setAuthenticating(false);//se l'autenticazione è completata\n});},[]);var token=getToken();if(isAuthenticating&&token){return/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:\" Authenticating ...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"logo\",children:/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{class:\"logocss\",src:require('./static/fss.png'),width:\"200px\",height:\"130px\",alt:\"FileSurfer\"})})}),/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"nav\",{class:\"links\",style:{'--items':4},children:[/*#__PURE__*/_jsx(NavLink,{activeClassName:\"selected\",to:\"/register\",children:\"Register\"}),/*#__PURE__*/_jsx(NavLink,{exact:true,activeClassName:\"selected\",to:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(NavLink,{activeClassName:\"selected\",to:\"/file-upload\",children:\"Upload\"}),/*#__PURE__*/_jsx(NavLink,{activeClassName:\"selected\",to:\"/file-download\",children:\"Download\"}),/*#__PURE__*/_jsx(\"span\",{class:\"line\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(PublicRoute,{exact:true,path:\"/\",component:Login}),/*#__PURE__*/_jsx(PublicRoute,{path:\"/register\",component:Register}),/*#__PURE__*/_jsx(PublicRoute,{path:\"/login\",component:Login}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/file-upload\",component:FileUpload}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/file-download\",component:FileDownload})]})})]})]});}export default App;","map":{"version":3,"names":["BrowserRouter","NavLink","Route","Switch","Register","Login","FileUpload","FileDownload","PublicRoute","PrivateRoute","React","useEffect","useState","getUser","getToken","setUserSession","resetUserSession","axios","jsx","_jsx","jsxs","_jsxs","verifyTokenAPIUrl","App","document","title","_useState","_useState2","_slicedToArray","isAuthenticating","setAuthenticating","token","undefined","requestConfig","headers","requestBody","user","post","then","response","data","catch","className","children","id","class","src","require","width","height","alt","style","activeClassName","to","exact","path","component"],"sources":["/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/src/App.js"],"sourcesContent":["import { BrowserRouter, NavLink, Route, Switch } from \"react-router-dom\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport FileUpload from \"./FileUpload\";\nimport FileDownload from \"./FileDownload\";\nimport PublicRoute from \"./routes/PublicRoute\";\nimport PrivateRoute from \"./routes/PrivateRoutes\";\nimport React, { useEffect, useState } from \"react\";\nimport { getUser, getToken, setUserSession, resetUserSession } from \"./service/AuthService\";\nimport axios from \"axios\";\n\nconst verifyTokenAPIUrl = 'https://891mazmbm6.execute-api.us-east-1.amazonaws.com/prod/verify';\n\nfunction App() {\n\n \n  document.title=\"FileSurfer\";\n  \n\n  const [isAuthenticating, setAuthenticating] = useState(true);\n\n  useEffect(() => {\n    const token = getToken();\n    if(token === 'undefined' || token === undefined || token === null || !token){\n      return;\n    }\n\n    const requestConfig = {\n      headers: {\n          'x-api-key': 'AWSOFGYQpg2EwcG41eiyXalnnBTPdhCJ6Q5SLdzy'\n      }\n    }\n\n    const requestBody = {\n      user: getUser(),\n      token: token\n    }\n\n    axios.post(verifyTokenAPIUrl, requestBody, requestConfig).then(response => {\n      setUserSession(response.data.user, response.data.token);\n      setAuthenticating(false); //se il token è stato validato\n    }).catch(() => {\n      resetUserSession();\n      setAuthenticating(false); //se l'autenticazione è completata\n    })\n\n  }, []);\n\n  const token = getToken();\n  if(isAuthenticating && token){\n    return <div className=\"content\"> Authenticating ...</div>\n  }\n\n  return (\n    \n    <div className=\"App\">\n      <br/>\n      <div id=\"logo\">\n\t\t\t  <center><img class=\"logocss\" src={require('./static/fss.png')} width=\"200px\" height=\"130px\" alt=\"FileSurfer\" /></center>\n\t\t  </div>\n      <BrowserRouter>\n      <div>\n        <nav class=\"links\" style={{'--items': 4}}>\n          <NavLink activeClassName=\"selected\" to=\"/register\">Register</NavLink>\n          <NavLink exact activeClassName=\"selected\" to=\"/login\">Login</NavLink>\n          <NavLink activeClassName=\"selected\" to=\"/file-upload\">Upload</NavLink>\n          <NavLink activeClassName=\"selected\" to=\"/file-download\">Download</NavLink>\n          <span class=\"line\"></span>\n        </nav>\n        \n      </div>\n      <div className=\"content\">\n        <Switch>\n          <PublicRoute exact path=\"/\" component={Login}/>\n          <PublicRoute path=\"/register\" component={Register}/>\n          <PublicRoute path=\"/login\" component={Login}/>\n          <PrivateRoute path=\"/file-upload\" component={FileUpload}/>\n          <PrivateRoute path=\"/file-download\" component={FileDownload}/>\n        </Switch>\n      </div>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}