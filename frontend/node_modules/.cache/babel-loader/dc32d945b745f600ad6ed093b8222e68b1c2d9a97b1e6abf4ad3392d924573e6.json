{"ast":null,"code":"import _slicedToArray from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{setUserSession}from\"./service/AuthService\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginAPIUrl='https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/login';var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var submitHandler=function submitHandler(event){event.preventDefault();if(email.trim()===''||password.trim()===''){setErrorMessage('Both username and password are required!');return;}setErrorMessage(null);var requestConfig={headers:{'x-api-key':'CqIRvghfaQlNhPna9d7P9q39aRmEwMT87auwBmF0'}};var requestBody={email:email,password:password};axios.post(loginAPIUrl,requestBody,requestConfig).then(function(response){setUserSession(response.data.user,response.data.token);props.history.push('/file-upload');}).catch(function(error){if(error.response.status===401||error.response.status===403){setErrorMessage(error.response.data.message);}else{setErrorMessage('sorry... the backend is down! please try again later!');}});};return/*#__PURE__*/_jsxs(\"div\",{class:\"logincss\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'rgb(163, 0, 203'},children:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{}),\"username \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:function onChange(event){return setEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"password \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\"button\",style:{'--clr':'#1ab5d4'},type:\"submit\",value:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:errorMessage})]});};export default Login;","map":{"version":3,"names":["React","useState","setUserSession","axios","jsx","_jsx","jsxs","_jsxs","loginAPIUrl","Login","props","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMessage","setErrorMessage","submitHandler","event","preventDefault","trim","requestConfig","headers","requestBody","post","then","response","data","user","token","history","push","catch","error","status","message","class","children","onSubmit","style","color","type","value","onChange","target","className"],"sources":["/home/valerio/Uni/SDCC/FileSurferServerless/frontend/src/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport { setUserSession } from \"./service/AuthService\";\nimport axios from 'axios';\n\nconst loginAPIUrl = 'https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/login';\n\nconst Login = (props) => {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const submitHandler = (event) => {\n      event.preventDefault();\n      if(email.trim() === '' || password.trim() === ''){\n        setErrorMessage('Both username and password are required!');\n        return;\n      }\n\n      setErrorMessage(null);\n      const requestConfig = {\n        headers: {\n            'x-api-key': 'CqIRvghfaQlNhPna9d7P9q39aRmEwMT87auwBmF0'\n        }\n      }\n\n      const requestBody = {\n        email: email,\n        password: password\n      }\n      axios.post(loginAPIUrl, requestBody, requestConfig).then((response) => {\n         setUserSession(response.data.user, response.data.token);\n         props.history.push('/file-upload');\n      }).catch((error) => {\n        if(error.response.status === 401 || error.response.status === 403){\n          setErrorMessage(error.response.data.message);\n        }else{\n          setErrorMessage('sorry... the backend is down! please try again later!');\n        }\n      })\n    }\n\n    return (\n        <div class=\"logincss\">\n          <form onSubmit={submitHandler}>\n            <h3 style={{color: 'rgb(163, 0, 203'}}>Login</h3>\n            <br/>\n            username <input type=\"text\" value = {email} onChange={event => setEmail(event.target.value)}/><br/>\n            <br/>\n            password <input type=\"password\" value = {password} onChange={event => setPassword(event.target.value)}/><br/>\n            <br/><br/>\n            <input class=\"button\" style={{'--clr': '#1ab5d4'}} type=\"submit\" value=\"Login\" />\n          </form>\n          {errorMessage && <p className=\"message\">{errorMessage}</p>}\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}