{"ast":null,"code":"import _classCallCheck from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{getUser,resetUserSession}from'./service/AuthService';import{render}from\"@testing-library/react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=/*#__PURE__*/function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));//const FileUpload = (props) => {\n//user = getUser();\n//name = user !== 'undefined' && user ? user.name : '';\n///////////////////////////////////////////////////////////\n_this.state={selectedFile:null,fileUploadSuccessfully:false};_this.onFileChange=function(event){_this.setState({selectedFile:event.target.files[0]});};_this.onFileUpload=function(){var formData=new FormData();formData.append(\"demo file\",_this.state.selectedFile,_this.state.selectedFile.name);//call api to upload the file\naxios.post(\" https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/file-upload\",formData).then(function(){_this.setState({selectedFile:null});_this.setState({fileUploadSuccessfully:true});});};_this.fileData=function(){if(_this.state.selectedFile){var date=new Date(_this.state.selectedFile.lastModified);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"File Details:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Name: \",_this.state.selectedFile.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Type: \",_this.state.selectedFile.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Modified: \",\" \",date.getDate()+\"-\"+date.getMonth()+\"-\"+date.getFullYear()+\" at time: \"+date.getHours()+\":\"+date.getMinutes()]})]});}else if(_this.state.fileUploadSuccessfully){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Your file has been successfully uploaded! \"})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Choose a file and then press the Upload button! \"})]});}};return _this;}_createClass(FileUpload,[{key:\"render\",value:///////////////////////////////////////////////////////////\nfunction render(){var _this2=this;var user=getUser();var name=user!=='undefined'&&user?user.name:'';var logoutHandler=function logoutHandler(){resetUserSession();//props.history.push('/login');\n_this2.props.history.push('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Filesurfer Converter System \"}),/*#__PURE__*/_jsx(\"h3\",{children:\" File Upload with React and a Serverless API! \"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:this.onFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onFileUpload,children:\"Upload\"})]}),this.fileData(),\"Hello \",name,\"! You have been loggined in!!! Welcome to the jungle! \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",value:\"Logout\",onClick:logoutHandler})]});}}]);return FileUpload;}(Component);export default FileUpload;","map":{"version":3,"names":["React","Component","getUser","resetUserSession","render","axios","jsx","_jsx","jsxs","_jsxs","FileUpload","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","selectedFile","fileUploadSuccessfully","onFileChange","event","setState","target","files","onFileUpload","formData","FormData","append","name","post","then","fileData","date","Date","lastModified","children","type","getDate","getMonth","getFullYear","getHours","getMinutes","_createClass","key","value","_this2","user","logoutHandler","props","history","push","className","onChange","onClick"],"sources":["/home/valerio/Uni/SDCC/FileSurferServerless/frontend/src/FileUpload.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport {getUser, resetUserSession} from './service/AuthService';\nimport { render } from \"@testing-library/react\";\nimport axios from \"axios\";\n\nclass FileUpload extends Component {\n//const FileUpload = (props) => {\n\n    //user = getUser();\n    //name = user !== 'undefined' && user ? user.name : '';\n    \n\n    \n\n    ///////////////////////////////////////////////////////////\n\n    state = {\n        selectedFile: null,\n        fileUploadSuccessfully: false\n    }\n    \n    onFileChange = event => {\n        this.setState({selectedFile: event.target.files[0]});\n    }\n\n    onFileUpload = () => {\n        const formData = new FormData();\n        formData.append(\n            \"demo file\",\n            this.state.selectedFile,\n            this.state.selectedFile.name\n        )\n        //call api to upload the file\n        axios.post(\" https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/file-upload\", formData).then(() => {\n            this.setState({selectedFile: null});\n            this.setState({fileUploadSuccessfully: true});\n        })\n        \n    }\n\n    fileData = () => {\n        if(this.state.selectedFile){\n          var date = new Date(this.state.selectedFile.lastModified);\n          return(\n            <div>\n              <h2>File Details:</h2>\n              <p>File Name: {this.state.selectedFile.name}</p>\n              <p>File Type: {this.state.selectedFile.type}</p>\n              <p>Last Modified: {\" \"}\n                  {date.getDate()+ \"-\" + date.getMonth() + \"-\" + date.getFullYear() + \" at time: \" + date.getHours() + \":\" + date.getMinutes()}\n              </p>\n            </div>\n          );\n        } else if(this.state.fileUploadSuccessfully){\n          return (\n            <div>\n              <br />\n              <h4>Your file has been successfully uploaded! </h4>\n            </div>\n          );\n        } else {\n          return (\n            <div>\n              <br />\n              <h4>Choose a file and then press the Upload button! </h4>\n            </div>\n          )\n        }\n    }\n\n    ///////////////////////////////////////////////////////////\n    \n    render(){\n        let user = getUser();\n        let name = user !== 'undefined' && user ? user.name : '';\n\n        const logoutHandler = () => {\n            resetUserSession();\n            //props.history.push('/login');\n            this.props.history.push('/login');\n        }\n\n        return (\n            <div className=\"container\">\n                <h2> Filesurfer Converter System </h2>\n                <h3> File Upload with React and a Serverless API! </h3>\n                <div>\n                    <input type=\"file\" onChange={this.onFileChange} />\n                    <button onClick={this.onFileUpload}>\n                        Upload\n                    </button>\n                </div>\n                {this.fileData()}\n                Hello {name}! You have been loggined in!!! Welcome to the jungle! <br/>\n                <input type=\"button\" value=\"Logout\" onClick={logoutHandler}/>\n            </div>    \n        )\n    }\n    \n    \n}\n\nexport default FileUpload;"],"mappings":"whBAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,OAAQC,OAAO,CAAEC,gBAAgB,KAAO,uBAAuB,CAC/D,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAEpB,CAAAC,UAAU,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,UAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,UAAA,WAAAA,WAAA,MAAAK,KAAA,CAAAC,eAAA,MAAAN,UAAA,UAAAO,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAAF,IAAA,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,GAAAP,KAAA,CAAAF,MAAA,CAAAU,IAAA,CAAAC,KAAA,CAAAX,MAAA,QAAAY,MAAA,CAAAL,IAAA,GAChB;AAEI;AACA;AAKA;AAAAL,KAAA,CAEAW,KAAK,CAAG,CACJC,YAAY,CAAE,IAAI,CAClBC,sBAAsB,CAAE,KAC5B,CAAC,CAAAb,KAAA,CAEDc,YAAY,CAAG,SAAAC,KAAK,CAAI,CACpBf,KAAA,CAAKgB,QAAQ,CAAC,CAACJ,YAAY,CAAEG,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CACxD,CAAC,CAAAlB,KAAA,CAEDmB,YAAY,CAAG,UAAM,CACjB,GAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CACX,WAAW,CACXtB,KAAA,CAAKW,KAAK,CAACC,YAAY,CACvBZ,KAAA,CAAKW,KAAK,CAACC,YAAY,CAACW,IAC5B,CAAC,CACD;AACAjC,KAAK,CAACkC,IAAI,CAAC,0EAA0E,CAAEJ,QAAQ,CAAC,CAACK,IAAI,CAAC,UAAM,CACxGzB,KAAA,CAAKgB,QAAQ,CAAC,CAACJ,YAAY,CAAE,IAAI,CAAC,CAAC,CACnCZ,KAAA,CAAKgB,QAAQ,CAAC,CAACH,sBAAsB,CAAE,IAAI,CAAC,CAAC,CACjD,CAAC,CAAC,CAEN,CAAC,CAAAb,KAAA,CAED0B,QAAQ,CAAG,UAAM,CACb,GAAG1B,KAAA,CAAKW,KAAK,CAACC,YAAY,CAAC,CACzB,GAAI,CAAAe,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC5B,KAAA,CAAKW,KAAK,CAACC,YAAY,CAACiB,YAAY,CAAC,CACzD,mBACEnC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBpC,KAAA,MAAAoC,QAAA,EAAG,aAAW,CAAC9B,KAAA,CAAKW,KAAK,CAACC,YAAY,CAACW,IAAI,EAAI,CAAC,cAChD7B,KAAA,MAAAoC,QAAA,EAAG,aAAW,CAAC9B,KAAA,CAAKW,KAAK,CAACC,YAAY,CAACmB,IAAI,EAAI,CAAC,cAChDrC,KAAA,MAAAoC,QAAA,EAAG,iBAAe,CAAC,GAAG,CACjBH,IAAI,CAACK,OAAO,CAAC,CAAC,CAAE,GAAG,CAAGL,IAAI,CAACM,QAAQ,CAAC,CAAC,CAAG,GAAG,CAAGN,IAAI,CAACO,WAAW,CAAC,CAAC,CAAG,YAAY,CAAGP,IAAI,CAACQ,QAAQ,CAAC,CAAC,CAAG,GAAG,CAAGR,IAAI,CAACS,UAAU,CAAC,CAAC,EAC7H,CAAC,EACD,CAAC,CAEV,CAAC,IAAM,IAAGpC,KAAA,CAAKW,KAAK,CAACE,sBAAsB,CAAC,CAC1C,mBACEnB,KAAA,QAAAoC,QAAA,eACEtC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAsC,QAAA,CAAI,4CAA0C,CAAI,CAAC,EAChD,CAAC,CAEV,CAAC,IAAM,CACL,mBACEpC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAsC,QAAA,CAAI,kDAAgD,CAAI,CAAC,EACtD,CAAC,CAEV,CACJ,CAAC,QAAA9B,KAAA,EAAAqC,YAAA,CAAA1C,UAAA,GAAA2C,GAAA,UAAAC,KAAA,CAED;AAEA,SAAAlD,OAAA,CAAQ,KAAAmD,MAAA,MACJ,GAAI,CAAAC,IAAI,CAAGtD,OAAO,CAAC,CAAC,CACpB,GAAI,CAAAoC,IAAI,CAAGkB,IAAI,GAAK,WAAW,EAAIA,IAAI,CAAGA,IAAI,CAAClB,IAAI,CAAG,EAAE,CAExD,GAAM,CAAAmB,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxBtD,gBAAgB,CAAC,CAAC,CAClB;AACAoD,MAAI,CAACG,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,CACrC,CAAC,CAED,mBACInD,KAAA,QAAKoD,SAAS,CAAC,WAAW,CAAAhB,QAAA,eACtBtC,IAAA,OAAAsC,QAAA,CAAI,+BAA6B,CAAI,CAAC,cACtCtC,IAAA,OAAAsC,QAAA,CAAI,gDAA8C,CAAI,CAAC,cACvDpC,KAAA,QAAAoC,QAAA,eACItC,IAAA,UAAOuC,IAAI,CAAC,MAAM,CAACgB,QAAQ,CAAE,IAAI,CAACjC,YAAa,CAAE,CAAC,cAClDtB,IAAA,WAAQwD,OAAO,CAAE,IAAI,CAAC7B,YAAa,CAAAW,QAAA,CAAC,QAEpC,CAAQ,CAAC,EACR,CAAC,CACL,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,QACX,CAACH,IAAI,CAAC,wDAAsD,cAAA/B,IAAA,QAAI,CAAC,cACvEA,IAAA,UAAOuC,IAAI,CAAC,QAAQ,CAACQ,KAAK,CAAC,QAAQ,CAACS,OAAO,CAAEN,aAAc,CAAC,CAAC,EAC5D,CAAC,CAEd,CAAC,WAAA/C,UAAA,GA5FoBT,SAAS,EAiGlC,cAAe,CAAAS,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}