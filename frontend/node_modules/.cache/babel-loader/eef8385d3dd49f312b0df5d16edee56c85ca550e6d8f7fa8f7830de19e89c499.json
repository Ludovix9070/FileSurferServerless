{"ast":null,"code":"import _slicedToArray from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{setUserSession}from\"./service/AuthService\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginAPIUrl='https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/login';var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var submitHandler=function submitHandler(event){event.preventDefault();if(username.trim()===''||password.trim()===''){setErrorMessage('Both username and password are required!');return;}setErrorMessage(null);var requestConfig={headers:{'x-api-key':'CqIRvghfaQlNhPna9d7P9q39aRmEwMT87auwBmF0'}};var requestBody={username:username,password:password};axios.post(loginAPIUrl,requestBody,requestConfig).then(function(response){setUserSession(response.data.user,response.data.token);props.history.push('/file-upload');}).catch(function(error){if(error.response.status===401||error.response.status===403){setErrorMessage(error.response.data.message);}else{setErrorMessage('sorry... the backend is down! please try again later!');}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Login\"}),\"username: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),\"password: \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:errorMessage})]});};export default Login;","map":{"version":3,"names":["React","useState","setUserSession","axios","jsx","_jsx","jsxs","_jsxs","loginAPIUrl","Login","props","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMessage","setErrorMessage","submitHandler","event","preventDefault","trim","requestConfig","headers","requestBody","post","then","response","data","user","token","history","push","catch","error","status","message","children","onSubmit","type","value","onChange","target","className"],"sources":["/home/valerio/Uni/SDCC/FileSurferServerless/frontend/src/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport { setUserSession } from \"./service/AuthService\";\nimport axios from 'axios';\n\nconst loginAPIUrl = 'https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/login';\n\nconst Login = (props) => {\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const submitHandler = (event) => {\n      event.preventDefault();\n      if(username.trim() === '' || password.trim() === ''){\n        setErrorMessage('Both username and password are required!');\n        return;\n      }\n\n      setErrorMessage(null);\n      const requestConfig = {\n        headers: {\n            'x-api-key': 'CqIRvghfaQlNhPna9d7P9q39aRmEwMT87auwBmF0'\n        }\n      }\n\n      const requestBody = {\n        username: username,\n        password: password\n      }\n      axios.post(loginAPIUrl, requestBody, requestConfig).then((response) => {\n         setUserSession(response.data.user, response.data.token);\n         props.history.push('/file-upload');\n      }).catch((error) => {\n        if(error.response.status === 401 || error.response.status === 403){\n          setErrorMessage(error.response.data.message);\n        }else{\n          setErrorMessage('sorry... the backend is down! please try again later!');\n        }\n      })\n    }\n\n    return (\n        <div>\n          <form onSubmit={submitHandler}>\n            <h5>Login</h5>\n            username: <input type=\"text\" value = {username} onChange={event => setUsername(event.target.value)}/><br/>\n            password: <input type=\"password\" value = {password} onChange={event => setPassword(event.target.value)}/><br/>\n            <input type=\"submit\" value=\"Login\" />\n          </form>\n          {errorMessage && <p className=\"message\">{errorMessage}</p>}\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}