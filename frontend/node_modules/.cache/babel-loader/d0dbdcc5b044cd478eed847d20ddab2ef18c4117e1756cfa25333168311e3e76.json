{"ast":null,"code":"import _classCallCheck from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/valerio/Uni/SDCC/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{getUser,resetUserSession}from'./service/AuthService';import{render}from\"@testing-library/react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=/*#__PURE__*/function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.user=getUser();_this.state={selectedFile:null,fileUploadSuccessfully:false,email:''};_this.onFileChange=function(event){_this.setState({selectedFile:event.target.files[0]});};_this.onFileUpload=function(){var formData=new FormData();formData.append(\"pippo file\",_this.state.selectedFile,_this.state.selectedFile.name);formData.append(\"email\",_this.state.email);//call api to upload the file\naxios.post(\" https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/file-upload\",formData).then(function(){_this.setState({selectedFile:null});_this.setState({fileUploadSuccessfully:true});});};_this.fileData=function(){if(_this.state.selectedFile){var date=new Date(_this.state.selectedFile.lastModified);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"File Details:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Name: \",_this.state.selectedFile.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Type: \",_this.state.selectedFile.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Modified: \",\" \",date.getDate()+\"-\"+date.getMonth()+\"-\"+date.getFullYear()+\" at time: \"+date.getHours()+\":\"+date.getMinutes()]})]});}else if(_this.state.fileUploadSuccessfully){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Your file has been successfully uploaded! \"})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Choose a file and then press the Upload button! \"})]});}};return _this;}_createClass(FileUpload,[{key:\"render\",value:///////////////////////////////////////////////////////////\nfunction render(){var _this2=this;var user=getUser();var name=user!=='undefined'&&user?user.name:'';var email=user!=='undefined'&&user?user.email:'';this.state.email=email;var logoutHandler=function logoutHandler(){resetUserSession();_this2.props.history.push('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Filesurfer Converter System \"}),/*#__PURE__*/_jsx(\"h3\",{children:\" File Upload with React and a Serverless API! \"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:this.onFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onFileUpload,children:\"Upload\"})]}),this.fileData(),\"Hello \",name,\"! Your mail is \",this.state.email,\"! \",/*#__PURE__*/_jsx(\"br\",{}),\" You have been loggined in!!! Welcome to the jungle! \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",value:\"Logout\",onClick:logoutHandler})]});}}]);return FileUpload;}(Component);export default FileUpload;","map":{"version":3,"names":["React","Component","getUser","resetUserSession","render","axios","jsx","_jsx","jsxs","_jsxs","FileUpload","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","user","state","selectedFile","fileUploadSuccessfully","email","onFileChange","event","setState","target","files","onFileUpload","formData","FormData","append","name","post","then","fileData","date","Date","lastModified","children","type","getDate","getMonth","getFullYear","getHours","getMinutes","_createClass","key","value","_this2","logoutHandler","props","history","push","className","onChange","onClick"],"sources":["/home/valerio/Uni/SDCC/FileSurferServerless/frontend/src/FileUpload.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport {getUser, resetUserSession} from './service/AuthService';\nimport { render } from \"@testing-library/react\";\nimport axios from \"axios\";\n\nclass FileUpload extends Component {\n\n    user = getUser();\n    state = {\n        selectedFile: null,\n        fileUploadSuccessfully: false,\n        email: ''\n    }\n    \n    onFileChange = event => {\n        this.setState({selectedFile: event.target.files[0]});\n    }\n\n    onFileUpload = () => {\n        const formData = new FormData();\n        formData.append(\n            \"pippo file\",\n            this.state.selectedFile,\n            this.state.selectedFile.name,\n        )\n\n        formData.append(\"email\", this.state.email);\n        \n        //call api to upload the file\n        axios.post(\" https://yv8a67sww8.execute-api.us-east-1.amazonaws.com/prod/file-upload\", formData).then(() => {\n            this.setState({selectedFile: null});\n            this.setState({fileUploadSuccessfully: true});\n        }) \n    }\n\n    fileData = () => {\n        if(this.state.selectedFile){\n          var date = new Date(this.state.selectedFile.lastModified);\n          return(\n            <div>\n              <h2>File Details:</h2>\n              <p>File Name: {this.state.selectedFile.name}</p>\n              <p>File Type: {this.state.selectedFile.type}</p>\n              <p>Last Modified: {\" \"}\n                  {date.getDate()+ \"-\" + date.getMonth() + \"-\" + date.getFullYear() + \" at time: \" + date.getHours() + \":\" + date.getMinutes()}\n              </p>\n            </div>\n          );\n        } else if(this.state.fileUploadSuccessfully){\n          return (\n            <div>\n              <br />\n              <h4>Your file has been successfully uploaded! </h4>\n            </div>\n          );\n        } else {\n          return (\n            <div>\n              <br />\n              <h4>Choose a file and then press the Upload button! </h4>\n            </div>\n          )\n        }\n    }\n\n    ///////////////////////////////////////////////////////////\n    \n    render(){\n\n        let user = getUser();\n        let name = user !== 'undefined' && user ? user.name : '';\n        let email = user !== 'undefined' && user ? user.email : '';\n        this.state.email = email;\n\n        const logoutHandler = () => {\n            resetUserSession();\n            this.props.history.push('/login');\n        }\n\n        return (\n            <div className=\"container\">\n                <h2> Filesurfer Converter System </h2>\n                <h3> File Upload with React and a Serverless API! </h3>\n                <div>\n                    <input type=\"file\" onChange={this.onFileChange} />\n                    <button onClick={this.onFileUpload}>\n                        Upload\n                    </button>\n                </div>\n                {this.fileData()}\n                Hello {name}! Your mail is {this.state.email}! <br/> You have been loggined in!!! Welcome to the jungle! <br/>\n                <input type=\"button\" value=\"Logout\" onClick={logoutHandler}/>\n            </div>    \n        )\n    }\n    \n    \n}\n\nexport default FileUpload;"],"mappings":"whBAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,OAAQC,OAAO,CAAEC,gBAAgB,KAAO,uBAAuB,CAC/D,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAEpB,CAAAC,UAAU,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,UAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,UAAA,WAAAA,WAAA,MAAAK,KAAA,CAAAC,eAAA,MAAAN,UAAA,UAAAO,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAAF,IAAA,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,GAAAP,KAAA,CAAAF,MAAA,CAAAU,IAAA,CAAAC,KAAA,CAAAX,MAAA,QAAAY,MAAA,CAAAL,IAAA,GAAAL,KAAA,CAEZW,IAAI,CAAGxB,OAAO,CAAC,CAAC,CAAAa,KAAA,CAChBY,KAAK,CAAG,CACJC,YAAY,CAAE,IAAI,CAClBC,sBAAsB,CAAE,KAAK,CAC7BC,KAAK,CAAE,EACX,CAAC,CAAAf,KAAA,CAEDgB,YAAY,CAAG,SAAAC,KAAK,CAAI,CACpBjB,KAAA,CAAKkB,QAAQ,CAAC,CAACL,YAAY,CAAEI,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CACxD,CAAC,CAAApB,KAAA,CAEDqB,YAAY,CAAG,UAAM,CACjB,GAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CACX,YAAY,CACZxB,KAAA,CAAKY,KAAK,CAACC,YAAY,CACvBb,KAAA,CAAKY,KAAK,CAACC,YAAY,CAACY,IAC5B,CAAC,CAEDH,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAExB,KAAA,CAAKY,KAAK,CAACG,KAAK,CAAC,CAE1C;AACAzB,KAAK,CAACoC,IAAI,CAAC,0EAA0E,CAAEJ,QAAQ,CAAC,CAACK,IAAI,CAAC,UAAM,CACxG3B,KAAA,CAAKkB,QAAQ,CAAC,CAACL,YAAY,CAAE,IAAI,CAAC,CAAC,CACnCb,KAAA,CAAKkB,QAAQ,CAAC,CAACJ,sBAAsB,CAAE,IAAI,CAAC,CAAC,CACjD,CAAC,CAAC,CACN,CAAC,CAAAd,KAAA,CAED4B,QAAQ,CAAG,UAAM,CACb,GAAG5B,KAAA,CAAKY,KAAK,CAACC,YAAY,CAAC,CACzB,GAAI,CAAAgB,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC9B,KAAA,CAAKY,KAAK,CAACC,YAAY,CAACkB,YAAY,CAAC,CACzD,mBACErC,KAAA,QAAAsC,QAAA,eACExC,IAAA,OAAAwC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBtC,KAAA,MAAAsC,QAAA,EAAG,aAAW,CAAChC,KAAA,CAAKY,KAAK,CAACC,YAAY,CAACY,IAAI,EAAI,CAAC,cAChD/B,KAAA,MAAAsC,QAAA,EAAG,aAAW,CAAChC,KAAA,CAAKY,KAAK,CAACC,YAAY,CAACoB,IAAI,EAAI,CAAC,cAChDvC,KAAA,MAAAsC,QAAA,EAAG,iBAAe,CAAC,GAAG,CACjBH,IAAI,CAACK,OAAO,CAAC,CAAC,CAAE,GAAG,CAAGL,IAAI,CAACM,QAAQ,CAAC,CAAC,CAAG,GAAG,CAAGN,IAAI,CAACO,WAAW,CAAC,CAAC,CAAG,YAAY,CAAGP,IAAI,CAACQ,QAAQ,CAAC,CAAC,CAAG,GAAG,CAAGR,IAAI,CAACS,UAAU,CAAC,CAAC,EAC7H,CAAC,EACD,CAAC,CAEV,CAAC,IAAM,IAAGtC,KAAA,CAAKY,KAAK,CAACE,sBAAsB,CAAC,CAC1C,mBACEpB,KAAA,QAAAsC,QAAA,eACExC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAwC,QAAA,CAAI,4CAA0C,CAAI,CAAC,EAChD,CAAC,CAEV,CAAC,IAAM,CACL,mBACEtC,KAAA,QAAAsC,QAAA,eACExC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAwC,QAAA,CAAI,kDAAgD,CAAI,CAAC,EACtD,CAAC,CAEV,CACJ,CAAC,QAAAhC,KAAA,EAAAuC,YAAA,CAAA5C,UAAA,GAAA6C,GAAA,UAAAC,KAAA,CAED;AAEA,SAAApD,OAAA,CAAQ,KAAAqD,MAAA,MAEJ,GAAI,CAAA/B,IAAI,CAAGxB,OAAO,CAAC,CAAC,CACpB,GAAI,CAAAsC,IAAI,CAAGd,IAAI,GAAK,WAAW,EAAIA,IAAI,CAAGA,IAAI,CAACc,IAAI,CAAG,EAAE,CACxD,GAAI,CAAAV,KAAK,CAAGJ,IAAI,GAAK,WAAW,EAAIA,IAAI,CAAGA,IAAI,CAACI,KAAK,CAAG,EAAE,CAC1D,IAAI,CAACH,KAAK,CAACG,KAAK,CAAGA,KAAK,CAExB,GAAM,CAAA4B,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxBvD,gBAAgB,CAAC,CAAC,CAClBsD,MAAI,CAACE,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,CACrC,CAAC,CAED,mBACIpD,KAAA,QAAKqD,SAAS,CAAC,WAAW,CAAAf,QAAA,eACtBxC,IAAA,OAAAwC,QAAA,CAAI,+BAA6B,CAAI,CAAC,cACtCxC,IAAA,OAAAwC,QAAA,CAAI,gDAA8C,CAAI,CAAC,cACvDtC,KAAA,QAAAsC,QAAA,eACIxC,IAAA,UAAOyC,IAAI,CAAC,MAAM,CAACe,QAAQ,CAAE,IAAI,CAAChC,YAAa,CAAE,CAAC,cAClDxB,IAAA,WAAQyD,OAAO,CAAE,IAAI,CAAC5B,YAAa,CAAAW,QAAA,CAAC,QAEpC,CAAQ,CAAC,EACR,CAAC,CACL,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,QACX,CAACH,IAAI,CAAC,iBAAe,CAAC,IAAI,CAACb,KAAK,CAACG,KAAK,CAAC,IAAE,cAAAvB,IAAA,QAAI,CAAC,wDAAqD,cAAAA,IAAA,QAAI,CAAC,cAC9GA,IAAA,UAAOyC,IAAI,CAAC,QAAQ,CAACQ,KAAK,CAAC,QAAQ,CAACQ,OAAO,CAAEN,aAAc,CAAC,CAAC,EAC5D,CAAC,CAEd,CAAC,WAAAhD,UAAA,GAzFoBT,SAAS,EA8FlC,cAAe,CAAAS,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}