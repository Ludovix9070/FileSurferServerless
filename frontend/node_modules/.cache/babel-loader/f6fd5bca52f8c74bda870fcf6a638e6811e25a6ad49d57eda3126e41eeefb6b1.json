{"ast":null,"code":"import _classCallCheck from\"/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{getUser,resetUserSession}from'./service/AuthService';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=/*#__PURE__*/function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.user=getUser();_this.state={selectedFile:null,fileUploadSuccessfully:false,email:''};_this.onFileChange=function(event){_this.setState({selectedFile:event.target.files[0]});};_this.onFileUpload=function(){var formData=new FormData();if(_this.state.selectedFile===null){if(window.confirm('Please choose a file to convert!')){window.location.reload();};}formData.append(\"file\",_this.state.selectedFile,_this.state.selectedFile.name);formData.append(\"email\",_this.state.email);//call api to upload the file\naxios.post(\" https://891mazmbm6.execute-api.us-east-1.amazonaws.com/prod/file-upload\",formData).then(function(){_this.setState({selectedFile:null});_this.setState({fileUploadSuccessfully:true});});};_this.fileData=function(){if(_this.state.selectedFile){var date=new Date(_this.state.selectedFile.lastModified);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"File Details:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Name: \",_this.state.selectedFile.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Type: \",_this.state.selectedFile.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Modified: \",\" \",date.getDate()+\"-\"+date.getMonth()+\"-\"+date.getFullYear()+\" at time: \"+date.getHours()+\":\"+date.getMinutes()]}),/*#__PURE__*/_jsx(\"br\",{})]});}else if(_this.state.fileUploadSuccessfully){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Your file has been successfully uploaded! \"}),/*#__PURE__*/_jsx(\"br\",{})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Choose a file and then press the Upload button! \"}),/*#__PURE__*/_jsx(\"br\",{})]});}};return _this;}_createClass(FileUpload,[{key:\"render\",value:///////////////////////////////////////////////////////////\nfunction render(){var _this2=this;var user=getUser();var email=user!=='undefined'&&user?user.email:'';this.state.email=email;var logoutHandler=function logoutHandler(){resetUserSession();_this2.props.history.push('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Filesurfer Converter System \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\" File Upload with React and a Serverless API! \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:this.onFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onFileUpload,children:\"Upload\"})]}),this.fileData(),\"Hello \",/*#__PURE__*/_jsxs(\"p\",{class:\"emailclass\",children:[this.state.email,\"!\"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"You have been loggined in!!! Welcome to the jungle! \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\"button\",style:{'--clr':'#1ab5d4'},type:\"button\",value:\"Logout\",onClick:logoutHandler})]});}}]);return FileUpload;}(Component);export default FileUpload;","map":{"version":3,"names":["React","Component","getUser","resetUserSession","axios","jsx","_jsx","jsxs","_jsxs","FileUpload","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","user","state","selectedFile","fileUploadSuccessfully","email","onFileChange","event","setState","target","files","onFileUpload","formData","FormData","window","confirm","location","reload","append","name","post","then","fileData","date","Date","lastModified","children","type","getDate","getMonth","getFullYear","getHours","getMinutes","_createClass","key","value","render","_this2","logoutHandler","props","history","push","className","accept","onChange","onClick","class","style"],"sources":["/home/ludovico/SDCC_Serverless/FileSurferServerless/frontend/src/FileUpload.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport {getUser, resetUserSession} from './service/AuthService';\nimport axios from \"axios\";\n\nclass FileUpload extends Component {\n\n    user = getUser();\n    state = {\n        selectedFile: null,\n        fileUploadSuccessfully: false,\n        email: ''\n    }\n    \n    onFileChange = event => {\n        this.setState({selectedFile: event.target.files[0]});\n    }\n\n    onFileUpload = () => {\n        const formData = new FormData();\n        if (this.state.selectedFile === null){\n          if (window.confirm('Please choose a file to convert!')) {\n            window.location.reload();\n          };\n        }\n        formData.append(\n            \"file\",\n            this.state.selectedFile,\n            this.state.selectedFile.name,\n        )\n\n        formData.append(\"email\", this.state.email);\n        \n        //call api to upload the file\n        axios.post(\" https://891mazmbm6.execute-api.us-east-1.amazonaws.com/prod/file-upload\", formData).then(() => {\n            this.setState({selectedFile: null});\n            this.setState({fileUploadSuccessfully: true});\n        }) \n    }\n\n    fileData = () => {\n        if(this.state.selectedFile){\n          var date = new Date(this.state.selectedFile.lastModified);\n          return(\n            <div>\n              <br/>\n              <h3>File Details:</h3>\n              \n              <p>File Name: {this.state.selectedFile.name}</p>\n              <p>File Type: {this.state.selectedFile.type}</p>\n              <p>Last Modified: {\" \"}\n                  {date.getDate()+ \"-\" + date.getMonth() + \"-\" + date.getFullYear() + \" at time: \" + date.getHours() + \":\" + date.getMinutes()}\n              </p>\n              <br/>\n            </div>\n          );\n        \n        } else if(this.state.fileUploadSuccessfully){\n          return (\n            <div>\n              <br />\n              <br/>\n              <h4>Your file has been successfully uploaded! </h4>\n              <br/>\n            </div>\n          );\n        } else {\n          return (\n            <div>\n              <br /><br/>\n              <h4>Choose a file and then press the Upload button! </h4><br/>\n            </div>\n          )\n        }\n    }\n\n    ///////////////////////////////////////////////////////////\n    \n    render(){\n\n        let user = getUser();\n        let email = user !== 'undefined' && user ? user.email : '';\n        this.state.email = email;\n\n        const logoutHandler = () => {\n            resetUserSession();\n            this.props.history.push('/login');\n        }\n\n        return (\n            <div className=\"container\">\n                <h2> Filesurfer Converter System </h2>\n                <br/>\n                <h3> File Upload with React and a Serverless API! </h3>\n                <br/><br/>\n                <div>\n                    <input type=\"file\" accept=\".csv\" onChange={this.onFileChange}/>\n                    <button onClick={this.onFileUpload}>\n                        Upload\n                    </button>\n                </div>\n                {this.fileData()}\n                Hello <p class=\"emailclass\">{this.state.email}!</p> <br/>You have been loggined in!!! Welcome to the jungle! <br/>\n                <br/><br/>\n                <input class=\"button\" style={{'--clr': '#1ab5d4'}} type=\"button\" value=\"Logout\" onClick={logoutHandler}/>\n            </div>    \n        )\n    }\n    \n    \n}\n\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}